<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Problem Set 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Exercise_01_files/libs/clipboard/clipboard.min.js"></script>
<script src="Exercise_01_files/libs/quarto-html/quarto.js"></script>
<script src="Exercise_01_files/libs/quarto-html/popper.min.js"></script>
<script src="Exercise_01_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Exercise_01_files/libs/quarto-html/anchor.min.js"></script>
<link href="Exercise_01_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Exercise_01_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Exercise_01_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Exercise_01_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Exercise_01_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Problem Set 1</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="foreword" class="level1">
<h1>Foreword</h1>
<p>The goal of this initial problem set is to recap some key concepts in the <code>R</code> programming language. We will specifically focus on data manipulation and visualization. The packages we use during the lectures, encompass training machine learning models and assessing their performance. They are generally user-friendly, however, it is crucial not to underestimate the role of effectively visualizing your findings. Visualizing results and data manipulation are closely related, so it is important to spend some time reviewing these fundamental concepts. We do expect you to have some experience with <code>R</code>, but courses like Statistics I/II are a sufficient prerequisite.</p>
<p>As for the exam, we will not expect you to write multiple lines of <code>R</code> code on paper, rather than potentially filling in some gaps or interpreting code chunks. It is important, however, that you understand the different models, methodologies, and code introduced throughout the semester since we will ask you to answer questions regarding those concepts.</p>
<p>As a rule of thumb, I recommend using the <code>help</code> function for most packages, as they are generally well-written and provide useful examples for understanding a function. Another simple solution for tackling problems in your code is to simply Google your problem and resort to platforms like <a href="https://stackoverflow.com/">Stackoverflow</a> (usually Stackoverflow is within the first five search results anyway).</p>
</section>
<section id="exercises" class="level1">
<h1>Exercises</h1>
<div class="cell">

</div>
<p>The following libraries include most packages we will need throughout this exercise sheet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidymodels"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Throughout this exercise, we will be working with the <a href="https://www.kaggle.com/datasets/sakshigoyal7/credit-card-customers">Credit Card customers</a> dataset. The dataset consists of 10,127 entries that represent individual customers of a bank including but not limited to their <code>age</code>, <code>salary</code>, <code>credit card limit</code>, and <code>credit card category</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>credit_info <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"BankChurners.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="exercise-1-visual-data-exploration" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1-visual-data-exploration">Exercise 1: Visual Data Exploration</h2>
<p>In this first exercise, we want to familiarize ourselves with the data set. <code>ggplot2</code> will be our primary library for visualizations as it offers a vast framework of plot types and customizations. If you are not yet familiar with <code>ggplot2</code>, you can check out the <a href="https://r-graphics.org/chapter-quick">R Graphics Cookbook</a>, which is an open-source practical guide for generating high-quality graphs with R, and in particular with <code>ggplot2</code>.</p>
<section id="exercise-1a" class="level3">
<h3 class="anchored" data-anchor-id="exercise-1a">Exercise 1a:</h3>
<p>We first want to explore some of the demographics in our data set. The following code generates a histogram for the age of the customers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> credit_info, <span class="fu">aes</span>(<span class="at">x =</span> Customer_Age))<span class="sc">+</span><span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Exercise_01_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Using the <code>binwidth</code> option, create a histogram for the age of the customers such that each age has its own bin. The output of your code should look as follows:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Exercise_01_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exercise-1b" class="level3">
<h3 class="anchored" data-anchor-id="exercise-1b">Exercise 1b:</h3>
<p>Now that the histogram looks a bit less messy, we want to add more information. For example, by setting the <code>fill</code> option to <code>Gender</code>, we can get an initial feeling for the distribution between male and female customers within each age group in the data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> credit_info, <span class="fu">aes</span>(Customer_Age, <span class="at">fill =</span> Gender))<span class="sc">+</span><span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Exercise_01_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Instead of visualizing the <code>Gender</code> as in the plot above, create a histogram with the <code>Attrition_Flag</code> as the <code>fill</code> option. Note, that in this context an attrited customer is someone who is either planning to cancel the credit card or has already handed in the cancellation form. The resulting plot should look like this:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Exercise_01_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exercise-1c" class="level3">
<h3 class="anchored" data-anchor-id="exercise-1c">Exercise 1c:</h3>
<p>The histograms above only provide limited insight to the demographics and customer status as it is relatively difficult to figure out the proportions of each group. To takes this one step further, consider the following histogram, which shows the <code>Education_Level</code> within every bin.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Exercise_01_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Instead of using a stacked histogram, we can resort to the <code>facet_wrap</code> function, which generates a subplot for each group.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> credit_info, <span class="fu">aes</span>(Customer_Age, <span class="at">fill =</span> Education_Level))<span class="sc">+</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="st">"Education_Level"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Exercise_01_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="exercise-1c-i" class="level4">
<h4 class="anchored" data-anchor-id="exercise-1c-i">Exercise 1c i:</h4>
<p>Create a histogram as above, but instead of grouping the <code>Education_Level</code>, group for the different credit card categories. The result should look like the following plot:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Exercise_01_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exercise-1c-ii" class="level4">
<h4 class="anchored" data-anchor-id="exercise-1c-ii">Exercise 1c ii:</h4>
<p>The legend in our generated plot is in no particular order. Familiarize yourself with the <code>factor</code> function, which helps solve that problem. By overwriting the <code>Income_Category</code> with the output of the <code>factor</code> function, we can order the income categories. Assign levels to the <code>Income_Category</code> using the <code>factor</code> function and generate a new plot with ordered labels. The new plot should look similar to the following:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Exercise_01_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="exercise-2-statistical-data-exploration-and-manipulation" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2-statistical-data-exploration-and-manipulation">Exercise 2: Statistical Data Exploration and Manipulation</h2>
<section id="exercise-2a" class="level3">
<h3 class="anchored" data-anchor-id="exercise-2a">Exercise 2a:</h3>
<p>One important aspect of Data Exploration is already visible in Exercise 1. The <code>Income_Category</code> of many customers is not known. That is not only the case for this variable but many others! However, instead of using the standard values <code>NA</code> or <code>NaN</code>, missing values are encoded by <code>Unknown</code>. The following code converts all the “Unknown” values to <code>NA</code>. By changing the values to <code>NA</code> we can filter them more conveniently in the later exercises.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>credit_info_clean <span class="ot">&lt;-</span>credit_info <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span><span class="fu">na_if</span>(.,<span class="st">"Unknown"</span>)))</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(credit_info_clean<span class="sc">$</span>Income_Category)[<span class="fu">levels</span>(credit_info_clean<span class="sc">$</span>Income_Category)<span class="sc">==</span><span class="st">"Unknown"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="exercise-2a-i" class="level4">
<h4 class="anchored" data-anchor-id="exercise-2a-i">Exercise 2a i:</h4>
<p>Given the cleaned data set <code>credit_info_clean</code>, find out which columns contain missing values. You can check your answer with the output below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Education_Level" "Marital_Status"  "Income_Category"</code></pre>
</div>
</div>
</section>
<section id="exercise-2a-ii" class="level4">
<h4 class="anchored" data-anchor-id="exercise-2a-ii">Exercise 2a ii:</h4>
<p>For the same data set, find out how many of the values are missing. You can check your answer with the output below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Education_Level  Marital_Status Income_Category 
           1519             749            1112 </code></pre>
</div>
</div>
</section>
</section>
<section id="exercise-2b" class="level3">
<h3 class="anchored" data-anchor-id="exercise-2b">Exercise 2b:</h3>
<p>Instead of visualizing our data, it is sometimes more convenient to directly examine numerical representations. Consider the following code chunk which groups the different income categories and applies the <code>mean</code> and <code>median</code> function to the data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>by_inc <span class="ot">&lt;-</span> credit_info_clean <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Income_Category) <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">meanlim =</span> <span class="fu">mean</span>(Credit_Limit),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">medlim =</span> <span class="fu">median</span>(Credit_Limit)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>by_inc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  Income_Category meanlim medlim
  &lt;fct&gt;             &lt;dbl&gt;  &lt;dbl&gt;
1 Less than $40K    3754.   2766
2 $40K - $60K       5462.   3682
3 $60K - $80K      10759.   7660
4 $80K - $120K     15810.  12830
5 $120K +          19717.  18442
6 &lt;NA&gt;              9517.   6380</code></pre>
</div>
</div>
<section id="exercise-2b-i" class="level4">
<h4 class="anchored" data-anchor-id="exercise-2b-i">Exercise 2b i:</h4>
<p>Modify the code snippet above to include the <span class="math inline">\(25\%\)</span> and <span class="math inline">\(75 \%\)</span> quantile. A solution could look like this:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  Income_Category   mean median `1stQlim` `3rdQplim`
  &lt;fct&gt;            &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
1 Less than $40K   3754.   2766     2021       4271 
2 $40K - $60K      5462.   3682     2436.      6725 
3 $60K - $80K     10759.   7660     3661.     15220.
4 $80K - $120K    15810.  12830     5511      25182.
5 $120K +         19717.  18442     8466.     34516 
6 &lt;NA&gt;             9517.   6380     3137      12420.</code></pre>
</div>
</div>
</section>
<section id="exercise-2b-ii" class="level4">
<h4 class="anchored" data-anchor-id="exercise-2b-ii">Exercise 2b ii:</h4>
<p>Modify your code to omit the <code>NA</code> values.</p>
<div class="cell">

</div>
</section>
</section>
<section id="exercise-2c" class="level3">
<h3 class="anchored" data-anchor-id="exercise-2c">Exercise 2c:</h3>
<p>Sometimes we only want to infer results for certain subgroups. The Blue Credit Card is by far the most common type of credit card. Gaining insights for this particular group allows us to retrieve information that might be useful in later analyses.</p>
<p>Hint: For the following exercises (especially ii and iii) the <code>dplyr</code> function <code>filter</code> will be useful.</p>
<section id="exercise-2c-i" class="level4">
<h4 class="anchored" data-anchor-id="exercise-2c-i">Exercise 2c i:</h4>
<p>Find out how many customers have a Blue credit card.</p>
<div class="cell">

</div>
</section>
<section id="exercise-2c-ii" class="level4">
<h4 class="anchored" data-anchor-id="exercise-2c-ii">Exercise 2c ii:</h4>
<p>Create a new tibble or data frame called <code>credit_info_blue</code> containing all customers that hold a Blue credit card.</p>
<div class="cell">

</div>
</section>
<section id="exercise-2c-iii" class="level4">
<h4 class="anchored" data-anchor-id="exercise-2c-iii">Exercise 2c iii:</h4>
<p>Find the number of Female Customers holding the Blue Card, that are at most 40 years old and have a credit limit above 10,000 USD.</p>
<div class="cell">

</div>
</section>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>